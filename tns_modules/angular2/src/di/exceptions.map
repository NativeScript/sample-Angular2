{"version":3,"sources":["exceptions.js"],"names":[],"mappings":"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","file":"/home/korchev/github/angular/modules/angular2/src/di/exceptions.js","sourcesContent":["import {ListWrapper, List} from 'angular2/src/facade/collection';\nimport {stringify} from 'angular2/src/facade/lang';\n\nfunction findFirstClosedCycle(keys:List) {\n  var res = [];\n  for(var i = 0; i < keys.length; ++i) {\n    if (ListWrapper.contains(res, keys[i])) {\n      ListWrapper.push(res, keys[i]);\n      return res;\n    } else {\n      ListWrapper.push(res, keys[i]);\n    }\n  }\n  return res;\n}\n\nfunction constructResolvingPath(keys:List) {\n  if (keys.length > 1) {\n    var reversed = findFirstClosedCycle(ListWrapper.reversed(keys));\n    var tokenStrs = ListWrapper.map(reversed, (k) => stringify(k.token));\n    return \" (\" + tokenStrs.join(' -> ') + \")\";\n  } else {\n    return \"\";\n  }\n}\n\nexport class KeyMetadataError extends Error {}\n\nexport class ProviderError extends Error {\n  keys:List;\n  constructResolvingMessage:Function;\n  message;\n  // TODO(tbosch): Can't do key:Key as this results in a circular dependency!\n  constructor(key, constructResolvingMessage:Function) {\n    super();\n    this.keys = [key];\n    this.constructResolvingMessage = constructResolvingMessage;\n    this.message = this.constructResolvingMessage(this.keys);\n  }\n\n  // TODO(tbosch): Can't do key:Key as this results in a circular dependency!\n  addKey(key) {\n    ListWrapper.push(this.keys, key);\n    this.message = this.constructResolvingMessage(this.keys);\n  }\n\n  toString() {\n    return this.message;\n  }\n}\n\nexport class NoProviderError extends ProviderError {\n  // TODO(tbosch): Can't do key:Key as this results in a circular dependency!\n  constructor(key) {\n    super(key, function (keys:List) {\n      var first = stringify(ListWrapper.first(keys).token);\n      return `No provider for ${first}!${constructResolvingPath(keys)}`;\n    });\n  }\n}\n\nexport class AsyncBindingError extends ProviderError {\n  // TODO(tbosch): Can't do key:Key as this results in a circular dependency!\n  constructor(key) {\n    super(key, function (keys:List) {\n      var first = stringify(ListWrapper.first(keys).token);\n      return `Cannot instantiate ${first} synchronously. ` +\n        `It is provided as a promise!${constructResolvingPath(keys)}`;\n    });\n  }\n}\n\nexport class CyclicDependencyError extends ProviderError {\n  // TODO(tbosch): Can't do key:Key as this results in a circular dependency!\n  constructor(key) {\n    super(key, function (keys:List) {\n      return `Cannot instantiate cyclic dependency!${constructResolvingPath(keys)}`;\n    });\n  }\n}\n\nexport class InstantiationError extends ProviderError {\n  // TODO(tbosch): Can't do key:Key as this results in a circular dependency!\n  constructor(originalException, key) {\n    super(key, function (keys:List) {\n      var first = stringify(ListWrapper.first(keys).token);\n      return `Error during instantiation of ${first}!${constructResolvingPath(keys)}.` +\n        ` ORIGINAL ERROR: ${originalException}`;\n    });\n  }\n}\n\nexport class InvalidBindingError extends Error {\n  message:string;\n  constructor(binding) {\n    super();\n    this.message = `Invalid binding ${binding}`;\n  }\n\n  toString() {\n    return this.message;\n  }\n}\n\nexport class NoAnnotationError extends Error {\n  message:string;\n  constructor(typeOrFunc) {\n    super();\n    this.message = `Cannot resolve all parameters for ${stringify(typeOrFunc)}`;\n  }\n\n  toString() {\n    return this.message;\n  }\n}\n"]}