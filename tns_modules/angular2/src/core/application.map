{"version":3,"sources":["application.js"],"names":[],"mappings":"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","file":"/home/korchev/github/angular/modules/angular2/src/core/application.js","sourcesContent":["import {Injector, bind, OpaqueToken} from 'angular2/di';\nimport {Type, isBlank, isPresent, BaseException, assertionsEnabled, print, stringify} from 'angular2/src/facade/lang';\nimport {BrowserDomAdapter} from 'angular2/src/dom/browser_adapter';\nimport {DOM} from 'angular2/src/dom/dom_adapter';\nimport {Compiler, CompilerCache} from './compiler/compiler';\nimport {ProtoView} from './compiler/view';\nimport {Reflector, reflector} from 'angular2/src/reflection/reflection';\nimport {Parser, Lexer, ChangeDetection, dynamicChangeDetection, jitChangeDetection} from 'angular2/change_detection';\nimport {ExceptionHandler} from './exception_handler';\nimport {TemplateLoader} from 'angular2/src/render/dom/compiler/template_loader';\nimport {TemplateResolver} from './compiler/template_resolver';\nimport {DirectiveMetadataReader} from './compiler/directive_metadata_reader';\nimport {DirectiveBinding} from './compiler/element_injector';\nimport {List, ListWrapper} from 'angular2/src/facade/collection';\nimport {Promise, PromiseWrapper} from 'angular2/src/facade/async';\nimport {VmTurnZone} from 'angular2/src/core/zone/vm_turn_zone';\nimport {LifeCycle} from 'angular2/src/core/life_cycle/life_cycle';\nimport {ShadowDomStrategy, NativeShadowDomStrategy, EmulatedUnscopedShadowDomStrategy} from 'angular2/src/core/compiler/shadow_dom_strategy';\nimport {XHR} from 'angular2/src/services/xhr';\nimport {XHRImpl} from 'angular2/src/services/xhr_impl';\nimport {EventManager, DomEventsPlugin} from 'angular2/src/render/dom/events/event_manager';\nimport {HammerGesturesPlugin} from 'angular2/src/render/dom/events/hammer_gestures';\nimport {Binding} from 'angular2/src/di/binding';\nimport {ComponentUrlMapper} from 'angular2/src/core/compiler/component_url_mapper';\nimport {UrlResolver} from 'angular2/src/services/url_resolver';\nimport {StyleUrlResolver} from 'angular2/src/render/dom/shadow_dom/style_url_resolver';\nimport {StyleInliner} from 'angular2/src/render/dom/shadow_dom/style_inliner';\nimport {Component} from 'angular2/src/core/annotations/annotations';\nimport {PrivateComponentLoader} from 'angular2/src/core/compiler/private_component_loader';\nimport {TestabilityRegistry, Testability} from 'angular2/src/core/testability/testability';\nimport {\n  appViewToken,\n  appChangeDetectorToken,\n  appElementToken,\n  appComponentAnnotatedTypeToken,\n  appDocumentToken,\n} from './application_tokens';\n\nvar _rootInjector: Injector;\n\n// Contains everything that is safe to share between applications.\nvar _rootBindings = [\n  bind(Reflector).toValue(reflector),\n  TestabilityRegistry\n];\n\nfunction _injectorBindings(appComponentType): List<Binding> {\n  return [\n      bind(appDocumentToken).toValue(DOM.defaultDoc()),\n      bind(appComponentAnnotatedTypeToken).toFactory((reader) => {\n        // TODO(rado): investigate whether to support bindings on root component.\n        return reader.read(appComponentType);\n      }, [DirectiveMetadataReader]),\n\n      bind(appElementToken).toFactory((appComponentAnnotatedType, appDocument) => {\n        var selector = appComponentAnnotatedType.annotation.selector;\n        var element = DOM.querySelector(appDocument, selector);\n        if (isBlank(element)) {\n          throw new BaseException(`The app selector \"${selector}\" did not match any elements`);\n        }\n        return element;\n      }, [appComponentAnnotatedTypeToken, appDocumentToken]),\n      bind(appViewToken).toAsyncFactory((changeDetection, compiler, injector, appElement,\n        appComponentAnnotatedType, strategy, eventManager, testability, registry) => {\n\n        // We need to do this here to ensure that we create Testability and\n        // it's ready on the window for users.\n        registry.registerApplication(appElement, testability);\n        var annotation = appComponentAnnotatedType.annotation;\n        if(!isBlank(annotation) && !(annotation instanceof Component)) {\n          var type = appComponentAnnotatedType.type;\n          throw new BaseException(`Only Components can be bootstrapped; ` +\n                                  `Directive of ${stringify(type)} is not a Component`);\n        }\n        return compiler.compile(appComponentAnnotatedType.type).then(\n            (protoView) => {\n          var appProtoView = ProtoView.createRootProtoView(protoView, appElement,\n            DirectiveBinding.createFromType(appComponentAnnotatedType.type, appComponentAnnotatedType.annotation),\n            changeDetection.createProtoChangeDetector('root'),\n            strategy);\n          // The light Dom of the app element is not considered part of\n          // the angular application. Thus the context and lightDomInjector are\n          // empty.\n          var view = appProtoView.instantiate(null, eventManager);\n          view.hydrate(injector, null, null, new Object(), null);\n          return view;\n        });\n      }, [ChangeDetection, Compiler, Injector, appElementToken, appComponentAnnotatedTypeToken,\n          ShadowDomStrategy, EventManager, Testability, TestabilityRegistry]),\n\n      bind(appChangeDetectorToken).toFactory((rootView) => rootView.changeDetector,\n          [appViewToken]),\n      bind(appComponentType).toFactory((rootView) => rootView.elementInjectors[0].getComponent(),\n          [appViewToken]),\n      bind(LifeCycle).toFactory((exceptionHandler) => new LifeCycle(exceptionHandler, null, assertionsEnabled()),[ExceptionHandler]),\n      bind(EventManager).toFactory((zone) => {\n        var plugins = [new HammerGesturesPlugin(), new DomEventsPlugin()];\n        return new EventManager(plugins, zone);\n      }, [VmTurnZone]),\n      bind(ShadowDomStrategy).toFactory(\n          (styleUrlResolver, doc) => new EmulatedUnscopedShadowDomStrategy(styleUrlResolver, doc.head),\n          [StyleUrlResolver, appDocumentToken]),\n      Compiler,\n      CompilerCache,\n      TemplateResolver,\n      bind(ChangeDetection).toValue(dynamicChangeDetection),\n      TemplateLoader,\n      DirectiveMetadataReader,\n      Parser,\n      Lexer,\n      ExceptionHandler,\n      bind(XHR).toValue(new XHRImpl()),\n      ComponentUrlMapper,\n      UrlResolver,\n      StyleUrlResolver,\n      StyleInliner,\n      PrivateComponentLoader,\n      Testability,\n  ];\n}\n\nfunction _createVmZone(givenReporter:Function): VmTurnZone {\n  var defaultErrorReporter = (exception, stackTrace) => {\n    var longStackTrace = ListWrapper.join(stackTrace, \"\\n\\n-----async gap-----\\n\");\n    print(`${exception}\\n\\n${longStackTrace}`);\n    throw exception;\n  };\n\n  var reporter = isPresent(givenReporter) ? givenReporter : defaultErrorReporter;\n\n  var zone = new VmTurnZone({enableLongStackTrace: assertionsEnabled()});\n  zone.initCallbacks({onErrorHandler: reporter});\n  return zone;\n}\n\n/**\n * Bootstrapping for Angular applications.\n *\n * You instantiate an Angular application by explicitly specifying a component to use as the root component for your\n * application via the `bootstrap()` method.\n *\n * ## Simple Example\n *\n * Assuming this `index.html`:\n *\n * ```html\n * <html>\n *   <!-- load Angular script tags here. -->\n *   <body>\n *     <my-app>loading...</my-app>\n *   </body>\n * </html>\n * ```\n *\n * An application is bootstrapped inside an existing browser DOM, typically `index.html`. Unlike Angular 1, Angular 2\n * does not compile/process bindings in `index.html`. This is mainly for security reasons, as well as architectural\n * changes in Angular 2. This means that `index.html` can safely be processed using server-side technologies such as\n * bindings. Bindings can thus use double-curly `{{ syntax }}` without collision from Angular 2 component double-curly\n * `{{ syntax }}`.\n *\n * We can use this script code:\n *\n * ```\n * @Component({\n *    selector: 'my-app'\n * })\n * @Template({\n *    inline: 'Hello {{ name }}!'\n * })\n * class MyApp {\n *   name:string;\n *\n *   constructor() {\n *     this.name = 'World';\n *   }\n * }\n *\n * main() {\n *   return bootstrap(MyApp);\n * }\n * ```\n *\n * When the app developer invokes `bootstrap()` with the root component `MyApp` as its argument, Angular performs the\n * following tasks:\n *\n *  1. It uses the component's `selector` property to locate the DOM element which needs to be upgraded into\n *     the angular component.\n *  2. It creates a new child injector (from the primordial injector) and configures the injector with the component's\n *     `services`. Optionally, you can also override the injector configuration for an app by invoking\n *     `bootstrap` with the `componentServiceBindings` argument.\n *  3. It creates a new [Zone] and connects it to the angular application's change detection domain instance.\n *  4. It creates a shadow DOM on the selected component's host element and loads the template into it.\n *  5. It instantiates the specified component.\n *  6. Finally, Angular performs change detection to apply the initial data bindings for the application.\n *\n *\n * ## Instantiating Multiple Applications on a Single Page\n *\n * There are two ways to do this.\n *\n *\n * ### Isolated Applications\n *\n * Angular creates a new application each time that the `bootstrap()` method is invoked. When multiple applications\n * are created for a page, Angular treats each application as independent within an isolated change detection and\n * [Zone] domain. If you need to share data between applications, use the strategy described in the next\n * section, \"Applications That Share Change Detection.\"\n *\n *\n * ### Applications That Share Change Detection\n *\n * If you need to bootstrap multiple applications that share common data, the applications must share a common\n * change detection and zone. To do that, create a meta-component that lists the application components in its template.\n * By only invoking the `bootstrap()` method once, with the meta-component as its argument, you ensure that only a\n * single change detection zone is created and therefore data can be shared across the applications.\n *\n *\n * ## Primordial Injector\n *\n * When working within a browser window, there are many singleton resources: cookies, title, location, and others.\n * Angular services that represent these resources must likewise be shared across all Angular applications that\n * occupy the same browser window.  For this reason, Angular creates exactly one global primordial injector which stores\n * all shared services, and each angular application injector has the primordial injector as its parent.\n *\n * Each application has its own private injector as well. When there are multiple applications on a page, Angular treats\n * each application injector's services as private to that application.\n *\n *\n * # API\n * - [appComponentType]: The root component which should act as the application. This is a reference to a [Type]\n *   which is annotated with `@Component(...)`.\n * - [componentServiceBindings]: An additional set of bindings that can be added to the [Component.services] to\n *   override default injection behavior.\n * - [errorReporter]: `function(exception:any, stackTrace:string)` a default error reporter for unhandled exceptions.\n *\n * Returns a [Promise] with the application`s private [Injector].\n *\n * @publicModule angular2/angular2\n */\nexport function bootstrap(appComponentType: Type,\n                          componentServiceBindings: List<Binding>=null,\n                          errorReporter: Function=null): Promise<Injector> {\n  BrowserDomAdapter.makeCurrent();\n  var bootstrapProcess = PromiseWrapper.completer();\n\n  var zone = _createVmZone(errorReporter);\n  zone.run(() => {\n    // TODO(rado): prepopulate template cache, so applications with only\n    // index.html and main.js are possible.\n\n    var appInjector = _createAppInjector(appComponentType, componentServiceBindings, zone);\n\n    PromiseWrapper.then(appInjector.asyncGet(appViewToken),\n      (rootView) => {\n        // retrieve life cycle: may have already been created if injected in root component\n        var lc=appInjector.get(LifeCycle);\n        lc.registerWith(zone, rootView.changeDetector);\n        lc.tick(); //the first tick that will bootstrap the app\n\n        bootstrapProcess.resolve(appInjector);\n      },\n\n      (err) => {\n        bootstrapProcess.reject(err)\n      });\n  });\n\n  return bootstrapProcess.promise;\n}\n\nfunction _createAppInjector(appComponentType: Type, bindings: List<Binding>, zone: VmTurnZone): Injector {\n  if (isBlank(_rootInjector)) _rootInjector = new Injector(_rootBindings);\n  var mergedBindings = isPresent(bindings) ?\n      ListWrapper.concat(_injectorBindings(appComponentType), bindings) :\n      _injectorBindings(appComponentType);\n  ListWrapper.push(mergedBindings, bind(VmTurnZone).toValue(zone));\n  return _rootInjector.createChild(mergedBindings);\n}\n"]}